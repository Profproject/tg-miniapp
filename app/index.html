<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Subscribo Engine</title>
  <link rel="stylesheet" href="/static/style.css?v=2" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="app">
    <header class="top glass">
      <div class="brand">
        <div class="logo">
          <span class="orb"></span>
        </div>
        <div class="bt">
          <div class="name">Subscribo <span class="chip">Engine</span></div>
          <div class="tag">White-label subscriptions & access control for Telegram</div>
        </div>
      </div>

      <nav class="tabs">
        <button class="tab active" data-view="dash">Dashboard</button>
        <button class="tab" data-view="features">Features</button>
        <button class="tab" data-view="pricing">Pricing</button>
        <button class="tab" data-view="admin">Admin</button>
      </nav>
    </header>

    <main class="content glass">
      <!-- DASH -->
      <section class="view active" id="view-dash">
        <div class="hero card tilt">
          <div class="heroTop">
            <div class="pill"><span class="dot"></span> Live • CryptoPay ready</div>
            <div class="heroTitle">Neon-grade subscription gate for Telegram channels & bots</div>
            <div class="heroSub">
              Create invoices, auto-activate plans, and manage access with a clean admin panel.
              Built to be sold as a white-label asset.
            </div>

            <div class="row">
              <button class="btn primary" id="btnPayPro">Pay PRO</button>
              <button class="btn" id="btnRefresh">Refresh</button>
            </div>
          </div>

          <div class="access card2">
            <div class="ct">Your Access</div>
            <div class="kv">
              <div class="k">User</div><div class="v mono" id="uid">—</div>
              <div class="k">Plan</div><div class="v" id="plan">—</div>
              <div class="k">Status</div><div class="v" id="status">Loading…</div>
              <div class="k">Expires</div><div class="v mono" id="exp">—</div>
            </div>

            <div class="row">
              <button class="btn" id="btnPayVip">Pay VIP</button>
              <button class="btn ghost" id="btnUseFree">Use FREE</button>
            </div>

            <div class="fine">
              PRO/VIP creates a CryptoPay invoice and opens payment. After payment, the plan activates automatically.
            </div>
          </div>
        </div>

        <div class="grid">
          <div class="card tilt">
            <div class="ct">Live Metrics</div>
            <div class="metrics">
              <div class="m">
                <div class="ml">Total users</div>
                <div class="mv" id="mTotal">—</div>
              </div>
              <div class="m">
                <div class="ml">PRO</div>
                <div class="mv" id="mPro">—</div>
              </div>
              <div class="m">
                <div class="ml">VIP</div>
                <div class="mv" id="mVip">—</div>
              </div>
            </div>

            <div class="fine">
              Metrics are server-side counters (SQLite). Good enough for a starter asset; can be swapped to Postgres.
            </div>
          </div>

          <div class="card tilt">
            <div class="ct">Status</div>
            <div class="statusBox">
              <div class="sbTitle">Payment & activation</div>
              <div class="sbText" id="sbText">
                Webhook activates instantly. Polling fallback is used if needed.
              </div>
              <div class="sbHint mono" id="sbHint">/api/health</div>
            </div>

            <div class="row">
              <button class="btn" id="btnOpenDocs">Open API Docs</button>
            </div>

            <div class="fine">
              Tip: open <span class="mono">/docs</span> to test endpoints quickly.
            </div>
          </div>
        </div>
      </section>

      <!-- FEATURES -->
      <section class="view" id="view-features">
        <div class="card wide tilt">
          <div class="ct">Feature Matrix</div>
          <div class="hint">Cards are locked/unlocked depending on your plan.</div>

          <div class="fgrid">
            <button class="feat" data-need="PRO">
              <div class="ftop"><span class="badge">PRO</span><span class="fname">Access Rules</span></div>
              <div class="fdesc">Auto-grant/revoke based on plan & expiry</div>
            </button>

            <button class="feat" data-need="PRO">
              <div class="ftop"><span class="badge">PRO</span><span class="fname">Analytics</span></div>
              <div class="fdesc">Cohorts, conversion, simple funnel</div>
            </button>

            <button class="feat" data-need="VIP">
              <div class="ftop"><span class="badge vip">VIP</span><span class="fname">Multi-Workspace</span></div>
              <div class="fdesc">White-label for multiple channel owners</div>
            </button>

            <button class="feat" data-need="VIP">
              <div class="ftop"><span class="badge vip">VIP</span><span class="fname">API & Webhooks</span></div>
              <div class="fdesc">Integrate with bots / CRM / external tools</div>
            </button>
          </div>

          <div class="fine">
            This is a productized demo UI. Real “premium features” can be built on top as add-ons.
          </div>
        </div>
      </section>

      <!-- PRICING -->
      <section class="view" id="view-pricing">
        <div class="card wide tilt">
          <div class="ct">Pricing</div>

          <div class="pgrid">
            <div class="pc">
              <div class="pn">FREE</div>
              <div class="pp">$0</div>
              <ul>
                <li>Basic gate</li>
                <li>Locked feature view</li>
                <li>No automations</li>
              </ul>
              <button class="btn ghost" id="btnFree">Use FREE</button>
            </div>

            <div class="pc glow">
              <div class="pn">PRO</div>
              <div class="pp">$19</div>
              <ul>
                <li>Unlock PRO features</li>
                <li>Automations</li>
                <li>Basic metrics</li>
              </ul>
              <button class="btn primary" id="btnPayPro2">Pay PRO</button>
            </div>

            <div class="pc">
              <div class="pn">VIP</div>
              <div class="pp">$49</div>
              <ul>
                <li>White-label toolkit</li>
                <li>Advanced controls</li>
                <li>Integrations</li>
              </ul>
              <button class="btn primary" id="btnPayVip2">Pay VIP</button>
            </div>
          </div>

          <div class="fine">
            Prices are configured in <span class="mono">plan_price()</span> inside <span class="mono">app/main.py</span>.
          </div>
        </div>
      </section>

      <!-- ADMIN -->
      <section class="view" id="view-admin">
        <div class="card wide tilt">
          <div class="ct">Admin Panel</div>
          <div class="hint">
            Admin key is stored in Render ENV (<span class="mono">ADMIN_KEY</span>). This UI sends it as header <span class="mono">x-admin-key</span>.
          </div>

          <div class="agrid">
            <input class="input" id="adminKey" placeholder="Admin key" />
            <input class="input" id="adminUser" placeholder="User id" />
            <input class="input" id="adminDays" placeholder="Days (optional)" />
            <button class="btn ghost" id="aFree">Set FREE</button>
            <button class="btn primary" id="aPro">Set PRO</button>
            <button class="btn primary" id="aVip">Set VIP</button>
          </div>

          <div class="log" id="log"></div>
        </div>
      </section>
    </main>

    <div class="modal" id="modal">
      <div class="mcard glass tilt">
        <div class="mt" id="mt">Title</div>
        <div class="mx" id="mx">Text</div>
        <div class="row">
          <button class="btn primary" id="mUpgrade">Pay PRO</button>
          <button class="btn ghost" id="mClose">Close</button>
        </div>
      </div>
    </div>

  </div>

  <script src="/static/script.js?v=2"></script>
</body>
</html>
